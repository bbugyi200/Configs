#!/usr/bin/env python

"""This hook runs when an existing TaskWarrior task is modified"""

import getpass
import sys
import json

sys.path.insert(0, '/home/{}/.task'.format(getpass.getuser()))

import hooks.runners  # noqa

old_task = json.loads(sys.stdin.readline())
new_task = json.loads(sys.stdin.readline())

if __name__ == "__main__":
    new_task = hooks.runners.run(new_task, old_task)
    print(json.dumps(new_task))
